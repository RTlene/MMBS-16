<view class="return-request-page">
  <scroll-view class="content" scroll-y>
    <view class="page-tip">已发货或已收货的订单可在此申请退货；如需换货请在原因与描述中说明。</view>
    <!-- 订单信息 -->
    <view class="order-info" wx:if="{{order}}">
      <view class="section-title">订单信息</view>
      <view class="order-card">
        <text class="order-no">订单号：{{order.orderNo}}</text>
        <text class="order-amount">订单金额：¥{{order.totalAmount}}</text>
      </view>
    </view>

    <!-- 退货原因 -->
    <view class="reason-section">
      <view class="section-title">退货原因 <text class="required">*</text></view>
      <view class="reason-list">
        <view 
          class="reason-item {{reason === item.value ? 'active' : ''}}"
          wx:for="{{reasons}}"
          wx:key="value"
          data-reason="{{item.value}}"
          bindtap="onSelectReason"
        >
          <text class="reason-label">{{item.label}}</text>
          <text class="reason-check" wx:if="{{reason === item.value}}">✓</text>
        </view>
      </view>
    </view>

    <!-- 问题描述 -->
    <view class="description-section">
      <view class="section-title">问题描述（选填）</view>
      <textarea
        class="description-input"
        placeholder="请详细描述退货原因，有助于我们更好地处理您的申请"
        value="{{description}}"
        bindinput="onInputDescription"
        maxlength="500"
        auto-height
      />
      <view class="char-count">{{description.length}}/500</view>
    </view>

    <!-- 上传凭证 -->
    <view class="images-section">
      <view class="section-title">上传凭证（选填，最多3张）</view>
      <view class="images-list">
        <view 
          class="image-item"
          wx:for="{{images}}"
          wx:key="index"
        >
          <image class="image" src="{{item}}" mode="aspectFill" />
          <view class="image-delete" data-index="{{index}}" bindtap="onDeleteImage">×</view>
        </view>
        <view 
          class="image-upload" 
          wx:if="{{images.length < 3}}"
          bindtap="onChooseImage"
        >
          <text class="upload-icon">+</text>
          <text class="upload-text">上传图片</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部提交按钮 -->
  <view class="bottom-bar">
    <button
      class="submit-btn"
      bindtap="onSubmit"
      loading="{{submitting}}"
      disabled="{{submitting}}"
    >
      提交申请
    </button>
  </view>
</view>


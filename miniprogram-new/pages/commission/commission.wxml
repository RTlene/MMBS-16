<view class="container">
  <!-- 统计卡片 -->
  <view class="stats-card" wx:if="{{stats}}">
    <view class="stats-item">
      <text class="stats-label">总佣金</text>
      <text class="stats-value">¥{{formatAmount(stats.totalCommission)}}</text>
    </view>
    <view class="stats-item">
      <text class="stats-label">总笔数</text>
      <text class="stats-value">{{stats.totalCount}}</text>
    </view>
  </view>

  <!-- 类型标签 -->
  <view class="tabs">
    <view 
      class="tab-item {{currentTab === item.key ? 'active' : ''}}"
      wx:for="{{tabs}}" 
      wx:key="key"
      data-tab="{{item.key}}"
      bindtap="onTabChange"
    >
      {{item.label}}
    </view>
  </view>

  <!-- 状态标签 -->
  <view class="status-tabs">
    <view 
      class="status-tab-item {{currentStatus === item.key ? 'active' : ''}}"
      wx:for="{{statusTabs}}" 
      wx:key="key"
      data-status="{{item.key}}"
      bindtap="onStatusTabChange"
    >
      {{item.label}}
    </view>
  </view>

  <!-- 佣金明细列表 -->
  <view class="records-list">
    <view class="record-item" wx:for="{{records}}" wx:key="id">
      <view class="record-header">
        <view class="record-type">{{item.typeText}}</view>
        <view class="record-amount {{item.amount >= 0 ? 'positive' : 'negative'}}">
          {{item.amount >= 0 ? '+' : ''}}¥{{formatAmount(item.amount)}}
        </view>
      </view>
      <view class="record-info">
        <text class="record-status {{item.status}}">{{item.statusText}}</text>
        <text class="record-time">{{formatTime(item.createdAt)}}</text>
      </view>
      <view class="record-detail" wx:if="{{item.description}}">
        <text>{{item.description}}</text>
      </view>
      <view class="record-order" wx:if="{{item.orderNo}}">
        <text>订单号：{{item.orderNo}}</text>
        <text wx:if="{{item.orderAmount}}">订单金额：¥{{formatAmount(item.orderAmount)}}</text>
      </view>
      <view class="record-balance">
        <text>余额：¥{{formatAmount(item.balance)}}</text>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty" wx:if="{{records.length === 0 && !loading}}">
      <text>暂无佣金记录</text>
    </view>

    <!-- 加载中 -->
    <view class="loading" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>

    <!-- 没有更多 -->
    <view class="no-more" wx:if="{{!hasMore && records.length > 0}}">
      <text>没有更多了</text>
    </view>
  </view>
</view>


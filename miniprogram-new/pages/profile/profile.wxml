<!--pages/profile/profile.wxml-->
<view class="profile-page">
  
  <!-- ç”¨æˆ·ä¿¡æ¯åŒº -->
  <view class="user-section">
    <view class="user-info" wx:if="{{isLogin && memberInfo}}">
      <image class="user-avatar" src="{{memberInfo.avatar || defaultAvatar}}" mode="aspectFill" />
      <view class="user-details">
        <text class="user-name">{{memberInfo.nickname || 'ä¼šå‘˜'}}</text>
        <text class="user-level">{{memberInfo.levelName || 'æ™®é€šä¼šå‘˜'}}</text>
      </view>
    </view>
    
    <view class="login-prompt" wx:else>
      <image class="user-avatar" src="{{defaultAvatar}}" mode="aspectFill" />
      <button class="login-btn" bindtap="onLogin">ç‚¹å‡»ç™»å½•</button>
    </view>
  </view>

  <!-- è®¢å•ç»Ÿè®¡ -->
  <view class="order-section" wx:if="{{isLogin}}">
    <view class="section-title" bindtap="goToOrders">
      <text>æˆ‘çš„è®¢å•</text>
      <text class="title-arrow">æŸ¥çœ‹å…¨éƒ¨ â€º</text>
    </view>
    <view class="order-stats">
      <view class="order-stat-item" bindtap="goToOrders" data-status="pending">
        <text class="stat-icon">ğŸ’°</text>
        <text class="stat-label">å¾…ä»˜æ¬¾</text>
        <view class="stat-badge" wx:if="{{orderStats.pending > 0}}">{{orderStats.pending}}</view>
      </view>
      <view class="order-stat-item" bindtap="goToOrders" data-status="paid">
        <text class="stat-icon">ğŸ“¦</text>
        <text class="stat-label">å¾…å‘è´§</text>
        <view class="stat-badge" wx:if="{{orderStats.paid > 0}}">{{orderStats.paid}}</view>
      </view>
      <view class="order-stat-item" bindtap="goToOrders" data-status="shipped">
        <text class="stat-icon">ğŸšš</text>
        <text class="stat-label">å¾…æ”¶è´§</text>
        <view class="stat-badge" wx:if="{{orderStats.shipped > 0}}">{{orderStats.shipped}}</view>
      </view>
      <view class="order-stat-item" bindtap="goToOrders" data-status="completed">
        <text class="stat-icon">âœ…</text>
        <text class="stat-label">å·²å®Œæˆ</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-item" bindtap="goToAddress">
      <text class="menu-icon">ğŸ“</text>
      <text class="menu-label">æ”¶è´§åœ°å€</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="goToTeam">
      <text class="menu-icon">ğŸ‘¥</text>
      <text class="menu-label">æˆ‘çš„å›¢é˜Ÿ</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="goToCoupons">
      <text class="menu-icon">ğŸ«</text>
      <text class="menu-label">æˆ‘çš„ä¼˜æƒ åˆ¸</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="goToVerification">
      <text class="menu-icon">ğŸŸï¸</text>
      <text class="menu-label">æˆ‘çš„æ ¸é”€ç </text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="onContact">
      <text class="menu-icon">ğŸ’¬</text>
      <text class="menu-label">è”ç³»å®¢æœ</text>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="goToAbout">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-label">å…³äºæˆ‘ä»¬</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section" wx:if="{{isLogin}}">
    <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒº -->
  <view class="safe-area-bottom"></view>
</view>


<!--pages/cart/cart.wxml-->
<view class="cart-page">
  
  <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨ -->
  <scroll-view class="cart-list" scroll-y wx:if="{{cartItems.length > 0}}">
    <view 
      class="cart-item"
      wx:for="{{cartItems}}"
      wx:key="index"
    >
      <!-- é€‰æ‹©æ¡† -->
      <view class="item-checkbox" bindtap="onSelectItem" data-index="{{index}}">
        <view class="checkbox-icon {{item.selected ? 'checked' : ''}}">
          <text class="checkmark" wx:if="{{item.selected}}">âœ“</text>
        </view>
      </view>

      <!-- å•†å“ä¿¡æ¯ -->
      <image class="item-image" src="{{item.image}}" mode="aspectFill" />
      
      <view class="item-info">
        <view class="item-name">{{item.name}}</view>
        <view class="item-sku">{{item.skuName}}</view>
        <view class="item-bottom">
          <view class="item-price">Â¥{{item.price}}</view>
          <view class="item-quantity">
            <view 
              class="quantity-btn" 
              bindtap="onQuantityChange" 
              data-index="{{index}}"
              data-type="decrease"
            >-</view>
            <text class="quantity-value">{{item.quantity}}</text>
            <view 
              class="quantity-btn" 
              bindtap="onQuantityChange" 
              data-index="{{index}}"
              data-type="increase"
            >+</view>
          </view>
        </view>
      </view>

      <!-- åˆ é™¤æŒ‰é’® -->
      <view class="item-delete" bindtap="onDeleteItem" data-index="{{index}}">
        <text class="delete-icon">ğŸ—‘ï¸</text>
      </view>
    </view>
  </scroll-view>

  <!-- ç©ºè´­ç‰©è½¦ -->
  <view class="empty-cart" wx:else>
    <text class="empty-icon">ğŸ›’</text>
    <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
    <navigator url="/pages/index/index" open-type="switchTab">
      <button class="go-shopping-btn">å»é€›é€›</button>
    </navigator>
  </view>

  <!-- åº•éƒ¨ç»“ç®—æ  -->
  <view class="cart-footer" wx:if="{{cartItems.length > 0}}">
    <view class="footer-left">
      <view class="select-all" bindtap="onSelectAll">
        <view class="checkbox-icon {{allSelected ? 'checked' : ''}}">
          <text class="checkmark" wx:if="{{allSelected}}">âœ“</text>
        </view>
        <text class="select-all-text">å…¨é€‰</text>
      </view>
      <view class="footer-total">
        <text class="total-label">åˆè®¡ï¼š</text>
        <text class="total-price">Â¥{{totalPrice}}</text>
      </view>
    </view>
    <button class="checkout-btn" bindtap="onCheckout">
      ç»“ç®—({{totalCount}})
    </button>
  </view>
</view>


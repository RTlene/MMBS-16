<view class="verification-container">
  <!-- æ‰«ç åŒºåŸŸ -->
  <view class="scan-section">
    <button class="scan-btn" bindtap="onScanCode">
      <text class="scan-icon">ğŸ“·</text>
      <text class="scan-text">æ‰«ææ ¸é”€ç </text>
    </button>
  </view>

  <!-- æ‰‹åŠ¨è¾“å…¥ -->
  <view class="input-section">
    <view class="input-wrapper">
      <input 
        class="code-input" 
        type="text" 
        placeholder="æˆ–æ‰‹åŠ¨è¾“å…¥æ ¸é”€ç "
        value="{{code}}"
        bindinput="onCodeInput"
        confirm-type="search"
        bindconfirm="onQueryCode"
      />
      <text class="query-btn" bindtap="onQueryCode">æŸ¥è¯¢</text>
    </view>
  </view>

  <!-- æŸ¥è¯¢ç»“æœ -->
  <view class="result-section" wx:if="{{showResult && verificationCode}}">
    <view class="result-card">
      <view class="result-header">
        <text class="result-title">æ ¸é”€ç ä¿¡æ¯</text>
        <text class="result-status status-{{verificationCode.status}}">
          {{verificationCode.statusText}}
        </text>
      </view>

      <view class="result-body">
        <view class="result-item">
          <text class="item-label">æ ¸é”€ç :</text>
          <text class="item-value code-value">{{verificationCode.code}}</text>
        </view>
        <view class="result-item">
          <text class="item-label">è®¢å•å·:</text>
          <text class="item-value">{{verificationCode.orderNo}}</text>
        </view>
        <view class="result-item">
          <text class="item-label">å•†å“åç§°:</text>
          <text class="item-value">{{verificationCode.productName}}</text>
        </view>
        <view class="result-item" wx:if="{{verificationCode.skuName}}">
          <text class="item-label">è§„æ ¼:</text>
          <text class="item-value">{{verificationCode.skuName}}</text>
        </view>
        <view class="result-item" wx:if="{{verificationCode.expiredAt}}">
          <text class="item-label">æœ‰æ•ˆæœŸ:</text>
          <text class="item-value">{{verificationCode.expiredAt}}</text>
        </view>
        <view class="result-item" wx:if="{{verificationCode.usedAt}}">
          <text class="item-label">ä½¿ç”¨æ—¶é—´:</text>
          <text class="item-value">{{verificationCode.usedAt}}</text>
        </view>
      </view>

      <view class="result-footer">
        <button 
          class="use-btn" 
          bindtap="onUseCode"
          disabled="{{verificationCode.status === 'used' || verificationCode.isExpired}}"
        >
          {{verificationCode.status === 'used' ? 'å·²ä½¿ç”¨' : verificationCode.isExpired ? 'å·²è¿‡æœŸ' : 'æ ¸é”€'}}
        </button>
        <button class="reset-btn" bindtap="onReset">é‡æ–°æŸ¥è¯¢</button>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æŸ¥è¯¢ä¸­...</text>
  </view>
</view>


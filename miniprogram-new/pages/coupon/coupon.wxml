<view class="container">
  <!-- 标签栏 -->
  <view class="tabs">
    <view 
      class="tab-item {{currentTab === item.key ? 'active' : ''}}"
      wx:for="{{tabs}}" 
      wx:key="key"
      data-tab="{{item.key}}"
      bindtap="onTabChange"
    >
      {{item.label}}
    </view>
  </view>

  <!-- 可领取列表 -->
  <view class="coupon-list" wx:if="{{currentTab === 'claimable'}}">
    <view 
      class="coupon-item claimable"
      wx:for="{{claimableCoupons}}" 
      wx:key="id"
    >
      <view class="coupon-left">
        <view class="coupon-value">{{item.displayValue}}</view>
        <view class="coupon-type">{{item.thresholdText}}</view>
      </view>
      <view class="coupon-right">
        <view class="coupon-name">{{item.name}}</view>
        <view class="coupon-condition">
          <text class="condition-label">使用门槛：</text>
          <text class="condition-value">{{item.thresholdText}}</text>
        </view>
        <view class="coupon-desc" wx:if="{{item.description}}">{{item.description}}</view>
        <view class="coupon-time" wx:if="{{item.validRange}}">{{item.validRange}}</view>
        <button class="btn-receive" data-id="{{item.id}}" catchtap="onReceiveCoupon">立即领取</button>
      </view>
    </view>
    <view class="empty" wx:if="{{claimableCoupons.length === 0 && !loading}}"><text>暂无可领取的优惠券</text></view>
    <view class="loading" wx:if="{{loading}}"><text>加载中...</text></view>
  </view>

  <!-- 我的优惠券列表 -->
  <view class="coupon-list" wx:else>
    <view 
      class="coupon-item {{item.status}}"
      wx:for="{{coupons}}" 
      wx:key="id"
      data-coupon="{{item}}"
      bindtap="onSelectCoupon"
    >
      <view class="coupon-left">
        <view class="coupon-value">{{item.displayValue}}</view>
        <view class="coupon-type">{{item.thresholdText}}</view>
      </view>
      <view class="coupon-right">
        <view class="coupon-name">{{item.name}}</view>
        <view class="coupon-condition">
          <text class="condition-label">使用门槛：</text>
          <text class="condition-value">{{item.thresholdText}}</text>
        </view>
        <view class="coupon-desc" wx:if="{{item.description}}">
          {{item.description}}
        </view>
        <view class="coupon-time" wx:if="{{item.validRange}}">{{item.validRange}}</view>
        <view class="coupon-status">
          <text wx:if="{{item.status === 'available'}}" class="status-text available">可使用</text>
          <text wx:elif="{{item.status === 'used'}}" class="status-text used">已使用</text>
          <text wx:elif="{{item.status === 'expired'}}" class="status-text expired">已过期</text>
          <text wx:else class="status-text unavailable">不可用</text>
        </view>
      </view>
    </view>

    <view class="empty" wx:if="{{coupons.length === 0 && !loading}}">
      <text>暂无优惠券</text>
    </view>

    <view class="loading" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && coupons.length > 0}}">
      <text>没有更多了</text>
    </view>
  </view>
</view>


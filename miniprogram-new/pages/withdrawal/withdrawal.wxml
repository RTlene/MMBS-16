<view class="withdrawal-page">
  <view class="commission-info">
    <text class="label">可用佣金</text>
    <text class="amount">¥{{availableCommission}}</text>
  </view>

  <view class="form-section">
    <view class="form-item">
      <text class="label">提现金额</text>
      <view class="input-group">
        <text class="prefix">¥</text>
        <input 
          class="input" 
          type="digit" 
          placeholder="请输入提现金额（最低¥10）"
          value="{{form.amount}}"
          bindinput="onAmountInput"
        />
        <text class="link" bindtap="onSelectAll">全部</text>
      </view>
    </view>

    <view class="form-item">
      <text class="label">账户类型</text>
      <picker 
        mode="selector" 
        range="{{['微信钱包', '银行']}}"
        range-key=""
        value="{{form.accountType === 'wechat' ? 0 : 1}}"
        bindchange="onAccountTypeChange"
      >
        <view class="picker">
          {{form.accountType === 'wechat' ? '微信钱包' : '银行'}}
          <text class="arrow">></text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">账户姓名</text>
      <input 
        class="input" 
        type="text" 
        placeholder="请输入账户姓名"
        value="{{form.accountName}}"
        bindinput="onAccountNameInput"
      />
    </view>

    <view class="form-item">
      <text class="label">账户号码</text>
      <input 
        class="input" 
        type="text" 
        placeholder="请输入账户号码"
        value="{{form.accountNumber}}"
        bindinput="onAccountNumberInput"
      />
    </view>

    <view class="form-item" wx:if="{{form.accountType === 'bank'}}">
      <text class="label">银行名称</text>
      <input 
        class="input" 
        type="text" 
        placeholder="请输入银行名称"
        value="{{form.bankName}}"
        bindinput="onBankNameInput"
      />
    </view>

    <view class="form-item" wx:if="{{form.accountType === 'bank'}}">
      <text class="label">开户行（选填）</text>
      <input 
        class="input" 
        type="text" 
        placeholder="请输入开户行"
        value="{{form.bankBranch}}"
        bindinput="onBankBranchInput"
      />
    </view>

    <view class="form-item">
      <text class="label">备注（选填）</text>
      <textarea 
        class="textarea" 
        placeholder="请输入备注信息"
        value="{{form.remark}}"
        bindinput="onRemarkInput"
        maxlength="200"
      />
    </view>
  </view>

  <view class="submit-section">
    <button 
      class="submit-btn {{loading ? 'disabled' : ''}}" 
      bindtap="onSubmit"
      disabled="{{loading}}"
    >
      {{loading ? '提交中...' : '提交提现申请'}}
    </button>
  </view>

  <!-- 近期提现记录：含「待确认收款」时展示按钮，用户可稍后在此确认 -->
  <view class="record-section" wx:if="{{withdrawalList.length > 0}}">
    <view class="record-title">近期提现</view>
    <view class="record-item" wx:for="{{withdrawalList}}" wx:key="id">
      <view class="record-row">
        <text class="record-amount">¥{{item.amount}}</text>
        <text class="record-status status-{{item.status}}">{{item.statusText}}</text>
      </view>
      <view class="record-row record-meta">{{item.accountTypeText}} · {{item.createdAtText}}</view>
      <view class="record-action" wx:if="{{item.needConfirmReceipt}}">
        <button class="confirm-receipt-btn" data-id="{{item.id}}" bindtap="onConfirmReceipt">去微信确认收款</button>
      </view>
    </view>
  </view>
</view>


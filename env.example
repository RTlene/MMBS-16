# ============================================
# 微信云托管环境变量配置示例
# ============================================
# 使用说明：
# 1. 复制此文件为 .env（本地开发用）
# 2. 在云托管控制台配置这些环境变量（生产环境）
# ============================================

# 应用配置
NODE_ENV=production
PORT=80

# 数据库配置（云托管 MySQL）
MYSQL_HOST=你的MySQL地址.mysql.tencentcdb.com
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=你的数据库密码
MYSQL_DATABASE=mmbs

# JWT 密钥（用于后台管理员登录）
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# 统一配置存储加密密钥（可选）
# - 不配置：程序会用 JWT_SECRET 做 SHA-256 得到 32 字节密钥，一般无需单独配
# - 若需单独配置：至少 32 个字符（按 UTF-8 取前 32 字节），用于加密存到对象存储的 app 配置
# CONFIG_ENCRYPTION_KEY=至少32个字符的随机字符串作为密钥

# 微信小程序配置
WX_APPID=你的小程序AppID
WX_APPSECRET=你的小程序AppSecret

# 微信支付配置（可选）
WX_MCHID=你的商户号
WX_PAY_KEY=你的支付密钥（API密钥）
WX_PAY_CERT_PATH=/app/cert/apiclient_cert.pem
WX_PAY_KEY_PATH=/app/cert/apiclient_key.pem
WX_PAY_CERT_SERIAL_NO=你的证书序列号
WX_PAY_NOTIFY_URL=https://your-domain.com/api/payment/wechat/notify
WX_PAY_SANDBOX=false  # 是否使用沙箱环境（测试时设为true）
BASE_URL=https://your-domain.com  # 基础URL（用于生成回调地址）
# 商家转账（升级版）：需在商户平台-产品中心-商家转账 开通并申请场景「佣金报酬」(1005)。单笔≥2000元时需传加密姓名并设 WECHATPAY_SERIAL（当前实现仅支持单笔<2000元）

# 云存储配置（可选，如果使用云开发存储）
CLOUD_ENV_ID=你的云开发环境ID

# 云托管自带对象存储（推荐：无需单独开通 COS）
# 配置后商品图片/视频上传到云托管存储，数据库存 file_id（cloud://xxx），H5 通过 /api/storage/temp-url 展示
# 需在云托管控制台 -> 微信令牌权限配置 中勾选 /tcb/uploadfile、/tcb/batchdownloadfile
# WX_CLOUD_ENV=你的云托管环境ID
# 若未设置 WX_CLOUD_ENV，会尝试使用 CBR_ENV_ID（部分部署会自动注入）

# 腾讯云 COS 对象存储（可选；未配置云托管存储时使用）
# 方式一：微信云托管自动注入 — 控制台已提供 COS_BUCKET、COS_REGION 时，无需填下面密钥，程序会通过 getauth 临时密钥上传
# 方式二：自建 COS — 在腾讯云控制台创建存储桶并获取 API 密钥，填写下面四项
# COS_SECRET_ID=你的SecretId
# COS_SECRET_KEY=你的SecretKey
# COS_BUCKET=你的存储桶名-APPID
# COS_REGION=ap-guangzhou
# COS_PREFIX=products
# COS_DOMAIN= 可选，自定义 CDN 域名，如 https://cdn.example.com

# 文件上传配置
UPLOAD_PATH=/app/public/uploads
MAX_FILE_SIZE=10485760

# 日志配置
LOG_LEVEL=info

# 其他配置
SESSION_SECRET=your-session-secret-key
CORS_ORIGIN=*


# ============================================
# 微信云托管环境变量配置示例
# ============================================
# 使用说明：
# 1. 复制此文件为 .env（本地开发用）
# 2. 在云托管控制台配置这些环境变量（生产环境）
# ============================================

# 应用配置
NODE_ENV=production
PORT=80

# 数据库配置（云托管 MySQL）
MYSQL_HOST=你的MySQL地址.mysql.tencentcdb.com
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=你的数据库密码
MYSQL_DATABASE=mmbs

# JWT 密钥（用于后台管理员登录）
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# 微信小程序配置
WX_APPID=你的小程序AppID
WX_APPSECRET=你的小程序AppSecret

# 微信支付配置（可选）
WX_MCHID=你的商户号
WX_PAY_KEY=你的支付密钥（API密钥）
WX_PAY_CERT_PATH=/app/cert/apiclient_cert.pem
WX_PAY_KEY_PATH=/app/cert/apiclient_key.pem
WX_PAY_CERT_SERIAL_NO=你的证书序列号
WX_PAY_NOTIFY_URL=https://your-domain.com/api/payment/wechat/notify
WX_PAY_SANDBOX=false  # 是否使用沙箱环境（测试时设为true）
BASE_URL=https://your-domain.com  # 基础URL（用于生成回调地址）

# 云存储配置（可选，如果使用云开发存储）
CLOUD_ENV_ID=你的云开发环境ID

# 云托管自带对象存储（推荐：无需单独开通 COS）
# 配置后商品图片/视频上传到云托管存储，数据库存 file_id（cloud://xxx），H5 通过 /api/storage/temp-url 展示
# 需在云托管控制台 -> 微信令牌权限配置 中勾选 /tcb/uploadfile、/tcb/batchdownloadfile
# WX_CLOUD_ENV=你的云托管环境ID
# 若未设置 WX_CLOUD_ENV，会尝试使用 CBR_ENV_ID（部分部署会自动注入）

# 腾讯云 COS 对象存储（可选；未配置云托管存储时使用；配置后商品图片/视频上传到 COS，再次编辑可正常加载）
# 在 腾讯云控制台 -> 访问管理 -> API密钥 获取 SecretId/SecretKey；对象存储 -> 存储桶 创建并记下 Bucket 与地域
# COS_SECRET_ID=你的SecretId
# COS_SECRET_KEY=你的SecretKey
# COS_BUCKET=你的存储桶名-APPID
# COS_REGION=ap-guangzhou
# COS_PREFIX=products
# COS_DOMAIN= 可选，自定义 CDN 域名，如 https://cdn.example.com

# 文件上传配置
UPLOAD_PATH=/app/public/uploads
MAX_FILE_SIZE=10485760

# 日志配置
LOG_LEVEL=info

# 其他配置
SESSION_SECRET=your-session-secret-key
CORS_ORIGIN=*


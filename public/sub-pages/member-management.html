<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>会员管理</title>
    <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                background-color: #f5f5f5;
                color: #333;
            }

            .container {
                max-width: 1600px;
                margin: 0 auto;
                padding: 20px;
                width: 100%;  /* 添加这行确保占满可用空间 */
            }

            .page-header {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            .page-title {
                font-size: 24px;
                font-weight: 600;
                color: #333;
                margin-bottom: 10px;
            }

            .page-description {
                color: #666;
                font-size: 14px;
            }

            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 20px;
            }

            .stat-card {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                text-align: center;
            }

            .stat-value {
                font-size: 32px;
                font-weight: 700;
                color: #1890ff;
                margin-bottom: 5px;
            }

            .stat-label {
                color: #666;
                font-size: 14px;
            }

            .filters {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            .filters-row {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 15px;
            }

            .filter-group {
                display: flex;
                flex-direction: column;
            }

            .filter-label {
                font-size: 14px;
                font-weight: 500;
                color: #333;
                margin-bottom: 5px;
            }

            .filter-input {
                padding: 8px 12px;
                border: 1px solid #d9d9d9;
                border-radius: 4px;
                font-size: 14px;
                transition: border-color 0.3s;
            }

            .filter-input:focus {
                outline: none;
                border-color: #1890ff;
                box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
            }

            .filter-buttons {
                display: flex;
                gap: 10px;
                margin-top: 10px;
            }

            .btn {
                padding: 8px 16px;
                border: none;
                border-radius: 4px;
                font-size: 14px;
                cursor: pointer;
                transition: all 0.3s;
                text-decoration: none;
                display: inline-block;
                text-align: center;
            }

            .btn-primary {
                background-color: #1890ff;
                color: white;
            }

            .btn-primary:hover {
                background-color: #40a9ff;
            }

            .btn-success {
                background-color: #52c41a;
                color: white;
            }

            .btn-success:hover {
                background-color: #73d13d;
            }

            .btn-warning {
                background-color: #faad14;
                color: white;
            }

            .btn-warning:hover {
                background-color: #ffc53d;
            }

            .btn-danger {
                background-color: #ff4d4f;
                color: white;
            }

            .btn-danger:hover {
                background-color: #ff7875;
            }

            .btn-info {
                background-color: #13c2c2;
                color: white;
            }

            .btn-info:hover {
                background-color: #36cfc9;
            }

            .btn-outline-primary {
                background-color: transparent;
                color: #1890ff;
                border: 1px solid #1890ff;
            }

            .btn-outline-primary:hover {
                background-color: #1890ff;
                color: white;
            }

            .btn-sm {
                padding: 4px 8px;
                font-size: 12px;
            }

            .btn-lg {
                padding: 12px 24px;
                font-size: 16px;
            }

            .table-container {
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }

            .table-header {
                padding: 20px;
                border-bottom: 1px solid #f0f0f0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .table-title {
                font-size: 18px;
                font-weight: 600;
                color: #333;
            }

            .table-actions {
                display: flex;
                gap: 10px;
            }

            .table {
                width: 100%;
                border-collapse: collapse;
            }

            .table th,
            .table td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #f0f0f0;
            }

            .table th {
                background-color: #fafafa;
                font-weight: 600;
                color: #333;
                font-size: 14px;
            }

            .table tbody tr:hover {
                background-color: #f5f5f5;
            }

            .status-badge {
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: 500;
            }

            .status-active {
                background-color: #f6ffed;
                color: #52c41a;
                border: 1px solid #b7eb8f;
            }

            .status-inactive {
                background-color: #fff2e8;
                color: #fa8c16;
                border: 1px solid #ffd591;
            }

            .status-suspended {
                background-color: #fff1f0;
                color: #ff4d4f;
                border: 1px solid #ffccc7;
            }

            .pagination {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                padding: 20px;
            }

            .pagination button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                align-items: center;
                justify-content: center;
            }

            .modal.show {
                display: flex;
            }

            .modal-content {
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                width: 95%;
                max-width: 1200px;
                max-height: 90vh;
                overflow-y: auto;
            }

            /* 会员详情弹窗：固定尺寸，不随内容变化，内容在内部滚动 */
            #memberDetailModal .modal-content {
                width: 1000px;
                max-width: 95vw;
                height: 85vh;
                max-height: 85vh;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }
            #memberDetailModal .modal-body {
                flex: 1;
                min-height: 0;
                overflow-y: auto;
            }

            .modal-header {
                padding: 20px;
                border-bottom: 1px solid #f0f0f0;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .modal-title {
                font-size: 18px;
                font-weight: 600;
                color: #333;
            }

            .modal-close {
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #999;
            }

            .modal-close:hover {
                color: #333;
            }

            .modal-body {
                padding: 20px;
                max-height: 70vh;
                overflow-y: auto;
            }

            .modal-footer {
                padding: 20px;
                border-top: 1px solid #f0f0f0;
                display: flex;
                justify-content: flex-end;
                gap: 10px;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                margin-bottom: 15px;
            }

            .form-group:last-child {
                margin-bottom: 0;
            }

            .form-label {
                font-size: 14px;
                font-weight: 500;
                color: #333;
                margin-bottom: 5px;
                display: block;
            }

            .form-label.required::after {
                content: ' *';
                color: #ff4d4f;
            }

            .form-input {
                padding: 8px 12px;
                border: 1px solid #d9d9d9;
                border-radius: 4px;
                font-size: 14px;
                transition: border-color 0.3s;
            }

            .form-input:focus {
                outline: none;
                border-color: #1890ff;
                box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
            }

            .form-textarea {
                padding: 8px 12px;
                border: 1px solid #d9d9d9;
                border-radius: 4px;
                font-size: 14px;
                transition: border-color 0.3s;
                resize: vertical;
                min-height: 80px;
            }

            .form-textarea:focus {
                outline: none;
                border-color: #1890ff;
                box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
            }

            .form-row {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 20px;
            }

            .form-row:last-child {
                margin-bottom: 0;
            }

            .form-row.single-column {
                grid-template-columns: 1fr;
            }

            .form-input.error,
            .form-textarea.error,
            select.error {
                border-color: #ff4d4f;
                box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
            }

            .form-error {
                color: #ff4d4f;
                font-size: 12px;
                margin-top: 4px;
            }

            .tabs {
                display: flex;
                border-bottom: 1px solid #f0f0f0;
                margin-bottom: 20px;
            }

            .tab-btn {
                padding: 10px 20px;
                background: none;
                border: none;
                cursor: pointer;
                font-size: 14px;
                color: #666;
                border-bottom: 2px solid transparent;
                transition: all 0.3s;
            }

            .tab-btn.active {
                color: #1890ff;
                border-bottom-color: #1890ff;
            }

            .tab-btn:hover {
                color: #1890ff;
            }

            .tab-content {
                display: none;
            }

            .tab-content.active {
                display: block;
            }

            .detail-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }

            .detail-section {
                background: #fafafa;
                padding: 15px;
                border-radius: 6px;
            }

            .detail-section-title {
                font-size: 16px;
                font-weight: 600;
                color: #333;
                margin-bottom: 10px;
            }

            .detail-item {
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
                padding: 5px 0;
            }

            .detail-item:last-child {
                margin-bottom: 0;
            }

            .detail-label {
                font-weight: 500;
                color: #666;
            }

            .detail-value {
                color: #333;
            }

            .network-node {
                padding: 10px;
                margin: 5px 0;
                background: #f5f5f5;
                border-radius: 4px;
                border-left: 3px solid #1890ff;
            }

            .network-node.level-1 {
                margin-left: 20px;
            }

            .network-node.level-2 {
                margin-left: 40px;
            }

            .network-node.level-3 {
                margin-left: 60px;
            }

            .commission-type-badge {
                padding: 2px 6px;
                border-radius: 3px;
                font-size: 11px;
                font-weight: 500;
            }

            .type-direct {
                background-color: #e6f7ff;
                color: #1890ff;
            }

            .type-indirect {
                background-color: #f6ffed;
                color: #52c41a;
            }

            .type-differential {
                background-color: #fff7e6;
                color: #fa8c16;
            }

            .type-team_expansion {
                background-color: #f9f0ff;
                color: #722ed1;
            }

            .text-center {
                text-align: center;
            }

            .text-right {
                text-align: right;
            }

            .hidden {
                display: none;
            }

            .loading {
                text-align: center;
                padding: 20px;
                color: #666;
            }

            .empty-state {
                text-align: center;
                padding: 40px 20px;
                color: #999;
            }

            .empty-state-icon {
                font-size: 48px;
                margin-bottom: 16px;
                opacity: 0.5;
            }

            .empty-state-text {
                font-size: 16px;
                margin-bottom: 8px;
            }

            .empty-state-description {
                font-size: 14px;
                color: #ccc;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 10px;
                }

                .filters-row {
                    grid-template-columns: 1fr;
                }

                .form-row {
                    grid-template-columns: 1fr;
                }

                .table-container {
                    overflow-x: auto;
                }

                .modal-content {
                    max-width: 95%;
                    margin: 10px;
                }

                .detail-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
</head>
<body>
    <div class="container">
        <!-- 页面头部 -->
        <div class="page-header">
            <h1 class="page-title">会员管理</h1>
            <p class="page-description">管理系统会员信息、等级、积分和佣金</p>
        </div>

        <!-- 统计信息 -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">总会员数</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">活跃会员</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">今日新增</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">0</div>
                <div class="stat-label">总积分</div>
            </div>
        </div>

        <!-- 筛选器 -->
        <div class="filters">
            <div class="filters-row">
                <div class="filter-group">
                    <label class="filter-label">搜索</label>
                    <input type="text" id="searchInput" class="filter-input" placeholder="搜索昵称、姓名、手机号或会员编号">
                </div>
                <div class="filter-group">
                    <label class="filter-label">状态</label>
                    <select id="statusFilter" class="filter-input">
                        <option value="">全部状态</option>
                        <option value="active">活跃</option>
                        <option value="inactive">非活跃</option>
                        <option value="suspended">暂停</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">等级</label>
                    <select id="levelFilter" class="filter-input">
                        <option value="">全部等级</option>
                    </select>
                </div>
            </div>
            <div class="filter-buttons">
                <button class="btn btn-primary" id="searchBtn">搜索</button>
                <button class="btn btn-outline-primary" id="resetBtn">重置</button>
            </div>
        </div>
                <!-- 会员列表 -->
                <div class="table-container">
                    <div class="table-header">
                        <h2 class="table-title">会员列表</h2>
                        <div class="table-actions">
                            <button class="btn btn-success" id="addMemberBtn">添加会员</button>
                            <button class="btn btn-danger" id="batchDeleteBtn">批量删除</button>
                            <button class="btn btn-info" id="exportMembersBtn">导出报表</button>
                            <button class="btn btn-warning" id="importMembersBtn">导入报表</button>
                            <button class="btn btn-outline-primary" id="downloadMembersTemplateBtn">下载导入模板</button>
                            <input type="file" id="membersImportFile" accept=".csv" style="display:none;" />
                        </div>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="selectAll"></th>
                                <th>昵称</th>
                                <th>手机号</th>
                                <th>会员等级</th>
                                <th>状态</th>
                                <th>积分</th>
                                <th>佣金</th>
                                <th>注册时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="memberTableBody">
                            <!-- 会员数据将通过JavaScript动态加载 -->
                        </tbody>
                    </table>
                    <div class="pagination" id="pagination">
                        <!-- 分页按钮将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
        
            <!-- 添加/编辑会员模态框 -->
            <div class="modal" id="memberModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="memberModalTitle">添加会员</h3>
                        <button class="modal-close" onclick="closeMemberModal()">&times;</button>
                    </div>
                    <form id="memberForm">
                        <div class="modal-body">
                            <!-- 基本信息 -->
                            <h4 style="margin-bottom: 15px; color: #333; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;">基本信息</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="nickname" class="form-label required">昵称</label>
                                    <input type="text" id="nickname" name="nickname" class="form-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="realName" class="form-label">真实姓名</label>
                                    <input type="text" id="realName" name="realName" class="form-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone" class="form-label">手机号</label>
                                    <input type="tel" id="phone" name="phone" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="memberCode" class="form-label">会员编号</label>
                                    <input type="text" id="memberCode" name="memberCode" class="form-input" readonly style="background-color: #f5f5f5;">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="openid" class="form-label">OpenID</label>
                                    <input type="text" id="openid" name="openid" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="unionid" class="form-label">UnionID</label>
                                    <input type="text" id="unionid" name="unionid" class="form-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="gender" class="form-label">性别</label>
                                    <select id="gender" name="gender" class="form-input">
                                        <option value="">请选择性别</option>
                                        <option value="male">男</option>
                                        <option value="female">女</option>
                                        <option value="other">其他</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="birthday" class="form-label">生日</label>
                                    <input type="date" id="birthday" name="birthday" class="form-input">
                                </div>
                            </div>
        
                            <!-- 地址信息 -->
                            <h4 style="margin: 20px 0 15px 0; color: #333; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;">地址信息</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="province" class="form-label">省份</label>
                                    <input type="text" id="province" name="province" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="city" class="form-label">城市</label>
                                    <input type="text" id="city" name="city" class="form-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="district" class="form-label">区县</label>
                                    <input type="text" id="district" name="district" class="form-input">
                                </div>
                                <div class="form-group">
                                    <label for="address" class="form-label">详细地址</label>
                                    <input type="text" id="address" name="address" class="form-input">
                                </div>
                            </div>
        
                            <!-- 等级信息 -->
                            <h4 style="margin: 20px 0 15px 0; color: #333; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;">等级信息</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="memberLevelId" class="form-label">会员等级</label>
                                    <select id="memberLevelId" name="memberLevelId" class="form-input">
                                        <option value="">请选择会员等级</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="distributorLevelId" class="form-label">分销等级</label>
                                    <select id="distributorLevelId" name="distributorLevelId" class="form-input">
                                        <option value="">请选择分销等级</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="teamExpansionLevelId" class="form-label">团队拓展激励等级</label>
                                    <select id="teamExpansionLevelId" name="teamExpansionLevelId" class="form-input">
                                        <option value="">请选择团队拓展激励等级</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="referrerId" class="form-label">推荐人</label>
                                    <select id="referrerId" name="referrerId" class="form-input">
                                        <option value="">请选择推荐人</option>
                                    </select>
                                </div>
                            </div>
        
                            <!-- 其他信息 -->
                            <h4 style="margin: 20px 0 15px 0; color: #333; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px;">其他信息</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="status" class="form-label">状态</label>
                                    <select id="status" name="status" class="form-input">
                                        <option value="active">活跃</option>
                                        <option value="inactive">非活跃</option>
                                        <option value="suspended">暂停</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="avatar" class="form-label">头像URL</label>
                                    <input type="url" id="avatar" name="avatar" class="form-input">
                                </div>
                            </div>
                            <div class="form-row single-column">
                                <div class="form-group">
                                    <label for="remark" class="form-label">备注</label>
                                    <textarea id="remark" name="remark" class="form-textarea" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-primary" onclick="closeMemberModal()">取消</button>
                            <button type="submit" class="btn btn-primary">保存</button>
                        </div>
                    </form>
                </div>
            </div>
        
            <!-- 会员详情模态框 -->
        <div class="modal" id="memberDetailModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">会员详情</h3>
                    <button class="modal-close" onclick="closeMemberDetailModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab('basic')">基本信息</button>
                        <button class="tab-btn" onclick="switchTab('distributor')">分销信息</button>
                        <button class="tab-btn" onclick="switchTab('network')">关系网</button>
                        <button class="tab-btn" onclick="switchTab('consumption')">消费记录</button>
                        <button class="tab-btn" onclick="switchTab('commission')">佣金记录</button>
                        <button class="tab-btn" onclick="switchTab('test')">测试功能</button>
                    </div>

                    <!-- 基本信息标签页 -->
                    <div id="basicTab" class="tab-content active">
                        <div class="detail-grid">
                            <div class="detail-section">
                                <h4 class="detail-section-title">基本信息</h4>
                                <div class="detail-item">
                                    <span class="detail-label">昵称</span>
                                    <span class="detail-value" id="detailNickname">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">真实姓名</span>
                                    <span class="detail-value" id="detailRealName">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">手机号</span>
                                    <span class="detail-value" id="detailPhone">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">会员编号</span>
                                    <span class="detail-value" id="detailMemberCode">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">OpenID</span>
                                    <span class="detail-value" id="detailOpenid">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">UnionID</span>
                                    <span class="detail-value" id="detailUnionid">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">性别</span>
                                    <span class="detail-value" id="detailGender">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">生日</span>
                                    <span class="detail-value" id="detailBirthday">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">地址</span>
                                    <span class="detail-value" id="detailAddress">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">状态</span>
                                    <span class="detail-value" id="detailStatus">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">备注</span>
                                    <span class="detail-value" id="detailRemark">-</span>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4 class="detail-section-title">等级信息</h4>
                                <div class="detail-item">
                                    <span class="detail-label">会员等级</span>
                                    <span class="detail-value" id="detailMemberLevel">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">分销等级</span>
                                    <span class="detail-value" id="detailDistributorLevel">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">团队拓展等级</span>
                                    <span class="detail-value" id="detailTeamExpansionLevel">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">推荐人</span>
                                    <span class="detail-value" id="detailReferrer">-</span>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4 class="detail-section-title">积分信息
                                    <button class="btn btn-sm btn-primary" onclick="showAdjustPointsModal()" style="margin-left: 10px; padding: 4px 12px; font-size: 12px;">调整积分</button>
                                </h4>
                                <div class="detail-item">
                                    <span class="detail-label">总积分</span>
                                    <span class="detail-value" id="detailTotalPoints">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">可用积分</span>
                                    <span class="detail-value" id="detailAvailablePoints">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">冻结积分</span>
                                    <span class="detail-value" id="detailFrozenPoints">0</span>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4 class="detail-section-title">佣金信息
                                    <button class="btn btn-sm btn-primary" onclick="showAdjustCommissionModal()" style="margin-left: 10px; padding: 4px 12px; font-size: 12px;">调整佣金</button>
                                </h4>
                                <div class="detail-item">
                                    <span class="detail-label">总佣金</span>
                                    <span class="detail-value" id="detailTotalCommission">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">可用佣金</span>
                                    <span class="detail-value" id="detailAvailableCommission">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">冻结佣金</span>
                                    <span class="detail-value" id="detailFrozenCommission">0</span>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4 class="detail-section-title">销售信息</h4>
                                <div class="detail-item">
                                    <span class="detail-label">总销售额</span>
                                    <span class="detail-value" id="detailTotalSales">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">直接销售额</span>
                                    <span class="detail-value" id="detailDirectSales">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">间接销售额</span>
                                    <span class="detail-value" id="detailIndirectSales">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">分销销售额</span>
                                    <span class="detail-value" id="detailDistributorSales">0</span>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4 class="detail-section-title">团队信息</h4>
                                <div class="detail-item">
                                    <span class="detail-label">直接粉丝</span>
                                    <span class="detail-value" id="detailDirectFans">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">总粉丝</span>
                                    <span class="detail-value" id="detailTotalFans">0</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">注册时间</span>
                                    <span class="detail-value" id="detailCreatedAt">-</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">更新时间</span>
                                    <span class="detail-value" id="detailUpdatedAt">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 分销信息标签页 -->
                    <div id="distributorTab" class="tab-content">
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>等级名称</th>
                                        <th>等级</th>
                                        <th>销售额要求</th>
                                        <th>粉丝要求</th>
                                        <th>采购成本</th>
                                        <th>直接佣金率</th>
                                        <th>间接佣金率</th>
                                        <th>特权</th>
                                    </tr>
                                </thead>
                                <tbody id="distributorInfoTableBody">
                                    <tr><td colspan="8" class="text-center">加载中...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- 关系网标签页 -->
                    <div id="networkTab" class="tab-content">
                        <div id="networkTree">
                            <div class="loading">加载中...</div>
                        </div>
                    </div>
                    
                    <!-- 消费记录标签页 -->
                    <div id="consumptionTab" class="tab-content">
                        <div class="filters">
                            <div class="filters-row">
                                <div class="filter-group">
                                    <label class="filter-label">状态筛选</label>
                                    <select id="consumptionStatusFilter" class="filter-input">
                                        <option value="">全部状态</option>
                                        <option value="pending">待支付</option>
                                        <option value="paid">已支付</option>
                                        <option value="shipped">已发货</option>
                                        <option value="delivered">已送达</option>
                                        <option value="cancelled">已取消</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-buttons">
                                <button class="btn btn-primary" onclick="loadConsumptionRecords()">刷新</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>订单号</th>
                                        <th>商品名称</th>
                                        <th>数量</th>
                                        <th>单价</th>
                                        <th>总金额</th>
                                        <th>状态</th>
                                        <th>支付方式</th>
                                        <th>创建时间</th>
                                    </tr>
                                </thead>
                                <tbody id="consumptionTableBody">
                                    <tr><td colspan="8" class="text-center">加载中...</td></tr>
                                </tbody>
                            </table>
                            <div class="pagination" id="consumptionPagination"></div>
                        </div>
                    </div>
                    
                    <!-- 佣金记录标签页 -->
                    <div id="commissionTab" class="tab-content">
                        <div class="filters">
                            <div class="filters-row">
                                <div class="filter-group">
                                    <label class="filter-label">类型筛选</label>
                                    <select id="commissionTypeFilter" class="filter-input">
                                        <option value="">全部类型</option>
                                        <option value="direct">直接佣金</option>
                                        <option value="indirect">间接佣金</option>
                                        <option value="differential">差额佣金</option>
                                        <option value="team_expansion">团队拓展</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-buttons">
                                <button class="btn btn-primary" onclick="loadCommissionRecords()">刷新</button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>订单号</th>
                                        <th>佣金类型</th>
                                        <th>金额</th>
                                        <th>描述</th>
                                        <th>状态</th>
                                        <th>创建时间</th>
                                    </tr>
                                </thead>
                                <tbody id="commissionTableBody">
                                    <tr><td colspan="6" class="text-center">加载中...</td></tr>
                                </tbody>
                            </table>
                            <div class="pagination" id="commissionPagination"></div>
                        </div>
                    </div>
                    
                    <!-- 测试功能标签页 -->
                    <div id="testTab" class="tab-content">
                        <div class="table-container">
                            <div class="table-header">
                                <h3>测试订单创建</h3>
                            </div>
                            <form id="testOrderForm">
                                <div class="modal-body">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label required">会员ID</label>
                                            <input type="number" class="form-input" id="testMemberId" name="testMemberId" value="" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label required">商品</label>
                                            <select class="form-input" id="testProductId" name="testProductId" required>
                                                <option value="">请选择商品</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label required">数量</label>
                                            <input type="number" class="form-input" id="testQuantity" name="testQuantity" value="1" min="1" required>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label required">单价</label>
                                            <input type="number" class="form-input" id="testUnitPrice" name="testUnitPrice" step="0.01" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label required">总金额</label>
                                            <input type="number" class="form-input" id="testTotalAmount" name="testTotalAmount" step="0.01" readonly>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label required">支付方式</label>
                                            <select class="form-input" id="testPaymentMethod" name="testPaymentMethod" required>
                                                <option value="test">测试支付</option>
                                                <option value="wechat">微信支付</option>
                                                <option value="alipay">支付宝</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-row single-column">
                                        <div class="form-group">
                                            <label class="form-label">收货地址</label>
                                            <input type="text" class="form-input" id="testShippingAddress" name="testShippingAddress" placeholder="请输入收货地址">
                                        </div>
                                    </div>
                                    <div class="form-row single-column">
                                        <div class="form-group">
                                            <label class="form-label">备注</label>
                                            <textarea class="form-textarea" id="testRemark" name="testRemark" rows="3"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" onclick="closeCreateOrderModal()">取消</button>
                                    <button type="submit" class="btn btn-primary">创建测试订单</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                                <!-- 会员添加/编辑表单 -->
        <div class="modal" id="memberModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="memberModalTitle">添加会员</h3>
                    <button class="close-btn" id="closeMemberModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="memberForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label required">昵称</label>
                                <input type="text" class="form-input" id="nickname" name="nickname" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">真实姓名</label>
                                <input type="text" class="form-input" id="realName" name="realName">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">手机号</label>
                                <input type="tel" class="form-input" id="phone" name="phone">
                            </div>
                            <div class="form-group">
                                <label class="form-label">邮箱</label>
                                <input type="email" class="form-input" id="email" name="email">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">OpenID</label>
                                <input type="text" class="form-input" id="openid" name="openid">
                            </div>
                            <div class="form-group">
                                <label class="form-label">UnionID</label>
                                <input type="text" class="form-input" id="unionid" name="unionid">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">会员等级</label>
                                <select class="form-input" id="memberLevelId" name="memberLevelId">
                                    <option value="">请选择会员等级</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">分销等级</label>
                                <select class="form-input" id="distributorLevelId" name="distributorLevelId">
                                    <option value="">请选择分销等级</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">团队拓展等级</label>
                                <select class="form-input" id="teamExpansionLevelId" name="teamExpansionLevelId">
                                    <option value="">请选择团队拓展等级</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">推荐人</label>
                                <select class="form-input" id="referrerId" name="referrerId">
                                    <option value="">请选择推荐人</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">状态</label>
                                <select class="form-input" id="status" name="status">
                                    <option value="active">正常</option>
                                    <option value="inactive">禁用</option>
                                    <option value="pending">待审核</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">积分</label>
                                <input type="number" class="form-input" id="points" name="points" value="0" min="0">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">余额</label>
                                <input type="number" class="form-input" id="balance" name="balance" value="0" min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label class="form-label">佣金余额</label>
                                <input type="number" class="form-input" id="commissionBalance" name="commissionBalance" value="0" min="0" step="0.01">
                            </div>
                        </div>
                        
                        <div class="form-row single-column">
                            <div class="form-group">
                                <label class="form-label">备注</label>
                                <textarea class="form-textarea" id="remarks" name="remarks" rows="3"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelMemberBtn">取消</button>
                    <button type="button" class="btn btn-primary" id="saveMemberBtn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 调整积分模态框 -->
    <div class="modal" id="adjustPointsModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">调整积分</h3>
                <button class="modal-close" onclick="closeAdjustPointsModal()">&times;</button>
            </div>
            <form id="adjustPointsForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">当前可用积分</label>
                        <input type="text" id="currentPoints" class="form-input" readonly style="background-color: #f5f5f5;">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">调整数量</label>
                        <input type="number" id="pointsAmount" name="pointsAmount" class="form-input" required placeholder="正数表示增加，负数表示减少">
                        <small class="form-text">输入正数增加积分，输入负数减少积分</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">调整后积分</label>
                        <input type="text" id="newPoints" class="form-input" readonly style="background-color: #f5f5f5;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">调整原因</label>
                        <textarea id="pointsDescription" name="pointsDescription" class="form-textarea" rows="3" placeholder="请输入调整原因（选填）"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" onclick="closeAdjustPointsModal()">取消</button>
                    <button type="submit" class="btn btn-primary">确认调整</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 调整佣金模态框 -->
    <div class="modal" id="adjustCommissionModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 class="modal-title">调整佣金</h3>
                <button class="modal-close" onclick="closeAdjustCommissionModal()">&times;</button>
            </div>
            <form id="adjustCommissionForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">当前可用佣金</label>
                        <input type="text" id="currentCommission" class="form-input" readonly style="background-color: #f5f5f5;">
                    </div>
                    <div class="form-group">
                        <label class="form-label required">调整金额</label>
                        <input type="number" id="commissionAmount" name="commissionAmount" class="form-input" step="0.01" required placeholder="正数表示增加，负数表示减少">
                        <small class="form-text">输入正数增加佣金，输入负数减少佣金</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">调整后佣金</label>
                        <input type="text" id="newCommission" class="form-input" readonly style="background-color: #f5f5f5;">
                    </div>
                    <div class="form-group">
                        <label class="form-label">调整原因</label>
                        <textarea id="commissionDescription" name="commissionDescription" class="form-textarea" rows="3" placeholder="请输入调整原因（选填）"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" onclick="closeAdjustCommissionModal()">取消</button>
                    <button type="submit" class="btn btn-primary">确认调整</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script src="../js/member-management.js"></script>
</body>
</html>